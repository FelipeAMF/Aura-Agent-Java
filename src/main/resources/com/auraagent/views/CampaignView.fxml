<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane fitToWidth="true" styleClass="scroll-pane"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.auraagent.controllers.CampaignController">
    <VBox spacing="20" style="-fx-padding: 20;">

        <GridPane hgap="20" vgap="20">
            <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" percentWidth="50.0"/>
                <ColumnConstraints hgrow="SOMETIMES" percentWidth="50.0"/>
            </columnConstraints>
            <VBox styleClass="central-panel" spacing="10" GridPane.columnIndex="0">
                <Label text="Lista de Contatos" styleClass="panel-title"/>
                <ComboBox fx:id="contactListComboBox" maxWidth="Infinity" promptText="Selecione uma lista"/>
                <TextArea fx:id="contactsDisplay" editable="false" wrapText="true" VBox.vgrow="ALWAYS" prefHeight="200"/>
            </VBox>
            <VBox styleClass="central-panel" spacing="10" GridPane.columnIndex="1">
                <Label text="Contas para Envio" styleClass="panel-title"/>
                <ListView fx:id="sendersListView" VBox.vgrow="ALWAYS" prefHeight="200"/>
            </VBox>
        </GridPane>
        <VBox styleClass="central-panel" spacing="10">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Mensagem / Legenda" styleClass="panel-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="templateSelector" editable="true" promptText="Selecionar ou criar modelo"/>
                <Button fx:id="saveTemplateButton" onAction="#handleSaveTemplate" text="Salvar"/>
            </HBox>
            <TextArea fx:id="spintaxMessage" wrapText="true" VBox.vgrow="ALWAYS" prefHeight="200"
                      promptText="Use {palavra1|palavra2} para variações e {nome} para personalizar."/>
        </VBox>

        <VBox styleClass="central-panel" spacing="15">
            <Label text="Anexos e Envio" styleClass="panel-title"/>
            <Separator/>
            <GridPane hgap="20" vgap="10" alignment="CENTER">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" prefWidth="200"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                <VBox spacing="10" GridPane.columnIndex="0">
                    <Button fx:id="attachImageButton" text="Anexar Imagem" onAction="#handleAttachImage" maxWidth="Infinity"/>
                    <Button fx:id="removeImageButton" text="Remover Imagem" onAction="#handleRemoveImage" maxWidth="Infinity"/>
                </VBox>
                <Label fx:id="attachedImageLabel" text="Nenhuma imagem anexada." GridPane.columnIndex="1"/>
                <HBox spacing="10" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <Label text="Intervalo:"/>
                    <ComboBox fx:id="delayComboBox"/>
                </HBox>
                <Button fx:id="testSendButton" text="Enviar Teste para..." onAction="#handleSendTestMessage" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
            </GridPane>
            
            <Separator/>
            <CheckBox fx:id="smartSendCheckBox" text="Envio Inteligente (Usa IA para variar as mensagens)"/>
            <Separator/>

            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Agendar para:"/>
                <DatePicker fx:id="scheduleDatePicker" promptText="Data"/>
                <TextField fx:id="scheduleTimeField" promptText="HH:mm" maxWidth="80"/>
                <Button fx:id="scheduleButton" text="Agendar Envio" onAction="#handleScheduleCampaign"/>
            </HBox>
            
            <Separator/>

            <VBox spacing="10">
                <HBox spacing="10" alignment="CENTER">
                    <Button fx:id="startButton" text="Iniciar Envio Agora" onAction="#handleStartSending" styleClass="primary-button" prefWidth="180"/>
                    <Button fx:id="pauseButton" text="Pausar" onAction="#handleTogglePause" prefWidth="150"/>
                    <Button fx:id="stopButton" text="Parar" onAction="#handleStopSending" styleClass="danger-button" prefWidth="150"/>
                </HBox>
                <ProgressBar fx:id="progressBar" progress="0.0" maxWidth="Infinity"/>
                <Label fx:id="statusLabel" text="Pronto para iniciar" alignment="CENTER" maxWidth="Infinity"/>
            </VBox>
        </VBox>
    </VBox>
</ScrollPane>